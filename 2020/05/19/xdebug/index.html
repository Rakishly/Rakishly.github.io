<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=""><title>phpstorm + xdebug 断点调试 | Rakishly</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/normalize.css/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/clipboard/dist/clipboard.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.js"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.css"><meta name="generator" content="Hexo 4.2.1"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">phpstorm + xdebug 断点调试</h1><a id="logo" href="/.">Rakishly</a><p class="description"></p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> Home</i></a><a href="/archives/"><i class="fa fa-archive"> Archive</i></a><a href="/about/"><i class="fa fa-user"> About</i></a><a href="/atom.xml"><i class="fa fa-rss"> RSS</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">phpstorm + xdebug 断点调试</h1><div class="post-meta">2020-05-19</div><div class="post-content"><h2 id="环境说明"><a href="#环境说明" class="headerlink" title="环境说明"></a>环境说明</h2><p>宿主机deepin系统，用的是docker-compose 搭建laravel</p>
<h2 id="php-ini-添加-xdebug-模块"><a href="#php-ini-添加-xdebug-模块" class="headerlink" title="php.ini 添加 xdebug 模块"></a>php.ini 添加 xdebug 模块</h2><ul>
<li>下载xdebug模块</li>
<li>首先打印phpinfo() 全选复制到 <a href="http://">https://xdebug.org/wizard</a> 这个链接的文本域中 并且点击这个按钮生成<br><img src="https://cdn.learnku.com/uploads/images/202001/09/26659/YLQUtpK94R.png!large" alt="phpstrom + docker + xdebug 断点调试"></li>
</ul>
<p><img src="https://cdn.learnku.com/uploads/images/202001/09/26659/WAtCbkijq7.png!large" alt="phpstrom + docker + xdebug 断点调试"><br>点击下载</p>
<blockquote>
<p>注：由于我之前下载2.7.1版本的，并且适用php 7.1，固这里不下载2.9</p>
</blockquote>
<p>解压并进入xdebug目录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tar -xvzf xdebug-2.9.0.tgz</span><br><span class="line">cd xdebug-2.9.0</span><br></pre></td></tr></table></figure>
<p>编译并生成.so文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">phpize # 生成configure文件</span><br><span class="line">.&#x2F;configure --enable-xdebug # 配置</span><br><span class="line">make &amp;&amp; make install # 编译并生成</span><br></pre></td></tr></table></figure>
<p>复制 xdebug.so模块到指定目录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd modules&#x2F; </span><br><span class="line">mkdir &#x2F;usr&#x2F;local&#x2F;bin&#x2F;modules </span><br><span class="line">cp xdebug.so &#x2F;usr&#x2F;local&#x2F;bin&#x2F;modules</span><br></pre></td></tr></table></figure>
<p>找到 <strong>php.ini</strong> 文件 在最后插入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[xdebug]</span><br><span class="line">zend_extension&#x3D;&#x2F;usr&#x2F;local&#x2F;bin&#x2F;modules&#x2F;xdebug.so</span><br><span class="line">xdebug.profiler_enable&#x3D;on #开启性能监控（一般在正式环境不建议开启）</span><br><span class="line">xdebug.trace_output_dir&#x3D;&quot;&#x2F;usr&#x2F;local&#x2F;php&#x2F;xdebug_trace&quot; #程序执行顺序日志</span><br><span class="line">xdebug.profiler_output_dir&#x3D;&quot;&#x2F;usr&#x2F;local&#x2F;php&#x2F;xdebug_profiler&quot; #程序执行性能日志</span><br><span class="line">xdebug.default_enable&#x3D;0</span><br><span class="line">xdebug.remote_enable&#x3D;1</span><br><span class="line">xdebug.remote_handler&#x3D;dbgp</span><br><span class="line">xdebug.remote_host&#x3D;192.168.5.24</span><br><span class="line">xdebug.remote_port&#x3D;9000</span><br><span class="line">xdebug.remote_connect_back&#x3D;0</span><br><span class="line">xdebug.remote_autostart&#x3D;1</span><br><span class="line">xdebug.idekey&#x3D;PHPSTORM</span><br><span class="line">xdebug.remote_log&#x3D;&#x2F;usr&#x2F;local&#x2F;php&#x2F;xdebug&#x2F;remote.log</span><br></pre></td></tr></table></figure>
<blockquote>
<p>zend_extension 这个值就是xdebug.so的目录，xdebug.remote_host是电脑ip，xdebug.idekey 这个值要跟phpstrom编辑器设置的一致</p>
</blockquote>
<p><strong>重启 php</strong> 打印 <strong>phpinfo()</strong>，如果有下图，表示成功</p>
<p><img src="https://cdn.learnku.com/uploads/images/202001/09/26659/yTd3hTTIV1.png!large" alt="phpstorm + xdebug 断点调试"></p>
<p>因为我用的是docker 刚开始没有 php.ini 文件<br><code>find / -name php.ini*</code></p>
<p><img src="https://cdn.learnku.com/uploads/images/202001/09/26659/RGOhxponSN.png!large" alt="phpstrom + docker + xdebug 断点调试"></p>
<p>进入/usr/local/etc/php，并且根据 <strong>php.ini-development</strong> 复制一份 <strong>php.ini</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd &#x2F;usr&#x2F;local&#x2F;etc&#x2F;php</span><br><span class="line">mv php.ini-development php.ini</span><br></pre></td></tr></table></figure>
<h2 id="接下来配置phpstorm"><a href="#接下来配置phpstorm" class="headerlink" title="接下来配置phpstorm"></a>接下来配置phpstorm</h2><p><code>|file|settings</code><br>这里的 <strong>debug port</strong> 要跟上面 php.ini 里面 <strong>xdebug.remote_port</strong> 的值一致<br><img src="https://cdn.learnku.com/uploads/images/202001/09/26659/unnb6VaLko.png!large" alt="phpstrom + docker + xdebug 断点调试"></p>
<p>配置DBGp Proxy，这里IDE key 要跟下面浏览器debug配置的key一致<br><img src="https://cdn.learnku.com/uploads/images/202001/09/26659/c02kNEe9ab.png!large" alt="phpstrom + docker + xdebug 断点调试"></p>
<p>配置servers，这里的host，本地项目一般填localhost，端口要跟服务器配置的一致，我的是宿主机81端口映射到docker容器 80端口，所以填81，<strong>Debugger</strong> 这里选择 <strong>Xdebug</strong> ，下面的File/Directory配置的是宿主机php项目所在目录，而absolute path on the server配置的是Docker容器中的项目目录<br><img src="https://cdn.learnku.com/uploads/images/202001/09/26659/Fncjm9wMX6.png!large" alt="phpstrom + docker + xdebug 断点调试"></p>
<p>配置 <code>|Run|Debug Configurations</code><br>添加一个<code>PHP Web Page</code><br><img src="https://cdn.learnku.com/uploads/images/202001/09/26659/1WEvAQYL8y.png!large" alt="phpstrom + docker + xdebug 断点调试"></p>
<h2 id="谷歌浏览器安装xdebug-helper-插件"><a href="#谷歌浏览器安装xdebug-helper-插件" class="headerlink" title="谷歌浏览器安装xdebug helper 插件"></a>谷歌浏览器安装<code>xdebug helper</code> 插件</h2><p>安装完成后，右键选择”选项”，IDE key选择”PhpStorm”，后面输入”PHPSTORM”点击save按钮即可:<br><img src="https://cdn.learnku.com/uploads/images/202001/09/26659/Kxt1y59lb3.png!large" alt="phpstrom + docker + xdebug 断点调试"></p>
<p>点击右上角这个电话虫，设置断点，浏览器刷新，就可以进行断点调试<br><img src="https://cdn.learnku.com/uploads/images/202001/09/26659/vrfB90sabr.png!large" alt="phpstrom + docker + xdebug 断点调试"></p>
</div><div class="tags"><a href="/tags/xdebug/"><i class="fa fa-tag"></i>xdebug</a></div><div class="post-nav"><a class="pre" href="/2020/06/10/Elasticsearch/">CentOS7 下安装 Elasticsearch</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="https://rakishly.github.io"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Categories</i></div></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/xdebug/" style="font-size: 15px;">xdebug</a> <a href="/tags/Elasticsearch/" style="font-size: 15px;">Elasticsearch</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2020/06/19/php/">PHP 知识</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/06/10/Elasticsearch/">CentOS7 下安装 Elasticsearch</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/05/19/xdebug/">phpstorm + xdebug 断点调试</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> Links</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2020 <a href="/." rel="nofollow">Rakishly.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.css"><script type="text/javascript" src="/js/copycode.js" successtext="Copy Successed!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>